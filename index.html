index
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reanimador CUA</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 20px;
      color: #333;
    }

    .container {
      max-width: 800px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    h1 {
      text-align: center;
      color: #d62828;
    }

    h2 {
      color: #003049;
    }

    .timer-section, .actions, .airway, .timeline, .reset {
      margin-bottom: 30px;
    }

    #main-timer, #pause-timer, #compression-timer {
      font-size: 2em;
      font-weight: bold;
      margin: 10px 0;
      color: #264653;
    }

    button {
      padding: 10px 15px;
      margin: 5px;
      border: none;
      border-radius: 8px;
      background-color: #2a9d8f;
      color: white;
      font-size: 1em;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #21867a;
    }

    .reset-btn {
      background-color: #e76f51;
    }

    .reset-btn:hover {
      background-color: #d65a3a;
    }

    .timeline ul {
      list-style-type: none;
      padding: 0;
    }

    .timeline li {
      background-color: #e9ecef;
      margin-bottom: 8px;
      padding: 10px;
      border-radius: 5px;
    }

    .airway input, .actions input {
      width: 150px;
      padding: 5px;
      margin-left: 5px;
    }

    label {
      margin-right: 10px;
    }
  </style>
  <script>
    let mainTimerInterval;
    let mainSeconds = 0;
    let pauseTimerInterval;
    let pauseSeconds = 0;
    let isPauseRunning = false;
    let compressionInterval;
    let compressionSecondsLeft = 120;
    let compressionActive = false;
    let timelineStarted = false;
    let timelineStartTime = 0;

    function formatTime(seconds) {
      const mins = String(Math.floor(seconds / 60)).padStart(2, '0');
      const secs = String(seconds % 60).padStart(2, '0');
      return `${mins}:${secs}`;
    }

    function startMainTimer() {
      clearInterval(mainTimerInterval);
      mainTimerInterval = setInterval(() => {
        mainSeconds++;
        document.getElementById('main-timer').textContent = formatTime(mainSeconds);
      }, 1000);
      registerEvent('Inicio de reanimación');
    }

    function togglePauseTimer() {
      const btn = document.getElementById('pause-btn');
      if (!isPauseRunning) {
        pauseTimerInterval = setInterval(() => {
          pauseSeconds++;
          document.getElementById('pause-timer').textContent = formatTime(pauseSeconds);
        }, 1000);
        btn.textContent = 'Pausar';
      } else {
        clearInterval(pauseTimerInterval);
        btn.textContent = 'Iniciar';
      }
      isPauseRunning = !isPauseRunning;
    }

    function startCompressionCycle() {
      clearInterval(compressionInterval);
      compressionSecondsLeft = 120;
      compressionActive = true;
      document.getElementById('compression-timer').style.color = 'black';

      if (!timelineStarted) {
        timelineStarted = true;
        timelineStartTime = mainSeconds;
        registerEvent('Inicio de compresiones');
      }

      compressionInterval = setInterval(() => {
        compressionSecondsLeft--;
        document.getElementById('compression-timer').textContent = formatTime(compressionSecondsLeft);
        if (compressionSecondsLeft === 30) {
          document.getElementById('compression-timer').style.color = 'red';
        }
        if (compressionSecondsLeft <= 0) {
          clearInterval(compressionInterval);
          compressionActive = false;
        }
      }, 1000);
    }

    function registerEvent(text) {
      if (!timelineStarted && text !== 'Inicio de reanimación') return;
      const li = document.createElement('li');
      const relativeTime = timelineStarted ? mainSeconds - timelineStartTime : 0;
      li.textContent = `[${formatTime(relativeTime)}] ${text}`;
      document.getElementById('timeline-list').appendChild(li);
    }

    function handleAirwayManagement() {
      const ml = document.getElementById('input-ml').value;
      const tet = document.getElementById('input-tet').value;
      if (ml) registerEvent(`Manejo Vía Aérea: Máscara laríngea N° ${ml}`);
      if (tet) registerEvent(`Manejo Vía Aérea: TET N° ${tet}`);
    }

    function registerOtherDrug() {
      const other = document.getElementById('input-other-drug').value;
      if (other) {
        registerEvent(`Otro fármaco: ${other}`);
        document.getElementById('input-other-drug').value = '';
      }
    }

    function resetAll() {
      clearInterval(mainTimerInterval);
      clearInterval(pauseTimerInterval);
      clearInterval(compressionInterval);
      mainSeconds = 0;
      pauseSeconds = 0;
      compressionSecondsLeft = 120;
      isPauseRunning = false;
      compressionActive = false;
      timelineStarted = false;
      document.getElementById('main-timer').textContent = '00:00';
      document.getElementById('pause-timer').textContent = '00:00';
      document.getElementById('compression-timer').textContent = '02:00';
      document.getElementById('compression-timer').style.color = 'black';
      document.getElementById('pause-btn').textContent = 'Iniciar';
      document.getElementById('timeline-list').innerHTML = '';
      document.getElementById('input-ml').value = '';
      document.getElementById('input-tet').value = '';
      document.getElementById('input-other-drug').value = '';
    }
  </script>
</head>
<body>
  <div class="container">
    <h1>Reanimador CUA</h1>

    <div class="timer-section">
      <h2>Cronómetro Central</h2>
      <div id="main-timer">00:00</div>
      <button onclick="startMainTimer()">Inicio Reanimación</button>
    </div>

    <div class="timer-section">
      <h2>Tiempo sin Compresiones</h2>
      <div id="pause-timer">00:00</div>
      <button onclick="togglePauseTimer()" id="pause-btn">Iniciar</button>
    </div>

    <div class="timer-section">
      <h2>Ciclo de Compresiones (2 min)</h2>
      <div id="compression-timer">02:00</div>
      <button onclick="startCompressionCycle()">Inicio de Compresiones</button>
    </div>

    <div class="actions">
      <h2>Acciones / Fármacos</h2>
      <button onclick="registerEvent('Adrenalina 1 mg')">Adrenalina 1 mg</button>
      <button onclick="registerEvent('Amiodarona 150 mg')">Amiodarona 150 mg</button>
      <button onclick="registerEvent('Amiodarona 300 mg')">Amiodarona 300 mg</button>
      <button onclick="registerEvent('Bicarbonato 2/3 M 250 cc')">Bicarbonato 2/3 M 250 cc</button>
      <button onclick="registerEvent('Atropina 1 mg')">Atropina 1 mg</button>
      <button onclick="registerEvent('Gluconato de Calcio 10%')">Gluconato de Calcio 10%</button>
      <button onclick="registerEvent('Sulfato de Magnesio 2 g')">Sulfato de Magnesio 2 g</button>
      <button onclick="registerEvent('Dextrosa 30% 20 ml')">Dextrosa 30% 20 ml</button>
      <button onclick="registerEvent('Naloxona 0.4 mg')">Naloxona 0.4 mg</button>
      <div>
        <label>Otro fármaco:</label>
        <input type="text" id="input-other-drug" placeholder="Nombre y dosis" />
        <button onclick="registerOtherDrug()">Registrar Otro</button>
      </div>
    </div>

    <div class="airway">
      <h2>Manejo de Vía Aérea</h2>
      <label>Máscara laríngea N° <input type="text" id="input-ml" size="3" /></label>
      <label>TET N° <input type="text" id="input-tet" size="3" /></label>
      <button onclick="handleAirwayManagement()">Registrar Manejo</button>
    </div>

    <div class="timeline">
      <h2>Línea de Tiempo</h2>
      <ul id="timeline-list"></ul>
    </div>

    <div class="reset">
      <button onclick="resetAll()" class="reset-btn">Reiniciar Todo</button>
    </div>
  </div>
</body>
</html>
